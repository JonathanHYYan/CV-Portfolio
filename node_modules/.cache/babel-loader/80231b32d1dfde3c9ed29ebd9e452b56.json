{"ast":null,"code":"import _regeneratorRuntime from\"D:/Work/cv-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Work/cv-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Work/cv-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Work/cv-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Card,CardTitle}from\"../UI/Card\";import{useState}from\"react\";import FormInput from\"./FormInput\";import FormMessage from\"./FormMessage\";import{ContactForm,Button,FormControls,FormError}from\"./FormStyles\";import{useContext}from\"react\";import ScrollContext from\"../../store/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var formState={name:\"\",email:\"\",message:\"\"};var touchState={name:false,email:false,message:false};var Form=function Form(){var scrollCtx=useContext(ScrollContext);var scroll=scrollCtx.scroll;var _useState=useState(formState),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];var _useState5=useState(touchState),_useState6=_slicedToArray(_useState5,2),used=_useState6[0],setUsed=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),formSubmitted=_useState10[0],setFormSubmitted=_useState10[1];var nameChangeHandler=function nameChangeHandler(event){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{name:event.target.value});});};var emailChangeHandler=function emailChangeHandler(event){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{email:event.target.value});});};var messageChangeHandler=function messageChangeHandler(event){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{message:event.target.value});});};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsLoading(true);setUsed(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{name:true,email:true,message:true});});if(!(formData.name.trim()===\"\"||formData.email.trim()===\"\"||formData.message.trim()===\"\")){_context.next=6;break;}setIsValid(false);return _context.abrupt(\"return\");case 6:setIsValid(true);_context.next=9;return fetch(\"http://localhost:3001/send\",{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify(formData)});case 9:response=_context.sent;if(response.status===200){console.log(\"Message Sent\");setFormSubmitted(true);}else{console.log(\"Message failed to send\");}case 11:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();var nameBlurHandler=function nameBlurHandler(event){setUsed(function(usedState){return _objectSpread(_objectSpread({},usedState),{},{name:true});});if(formData.name.trim()===\"\"){setIsValid(false);return;}setIsValid(true);};var emailBlurHandler=function emailBlurHandler(event){setUsed(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{email:true});});if(formData.email.trim()===\"\"){setIsValid(false);return;}setIsValid(true);};var messageBlurHandler=function messageBlurHandler(event){setUsed(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{message:true});});if(formData.message.trim()===\"\"){setIsValid(false);return;}setIsValid(true);};var nameCheck=!isValid&&used.name;var emailCheck=!isValid&&used.email;var messageCheck=!isValid&&used.message;var inputInvalid=used.name&&used.email&&used.message&&!isValid;var submitButton=/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Send\"});var loadButton=/*#__PURE__*/_jsx(Button,{disabled:true,type:\"submit\",children:\"Sending...\"});var formComponent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardTitle,{children:\"Contact Form\"}),/*#__PURE__*/_jsxs(ContactForm,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(FormInput,{id:\"name\",errorClass:nameCheck,labelName:\"Name\",min:1,inputValue:formData.name,inputChange:nameChangeHandler,onBlur:nameBlurHandler}),/*#__PURE__*/_jsx(FormInput,{id:\"email\",errorClass:emailCheck,labelName:\"Email\",min:1,inputValue:formData.email,inputChange:emailChangeHandler,onBlur:emailBlurHandler}),/*#__PURE__*/_jsx(FormMessage,{id:\"message\",errorClass:messageCheck,labelName:\"Message\",rows:5,messageValue:formData.message,messageChange:messageChangeHandler,onBlur:messageBlurHandler}),inputInvalid&&/*#__PURE__*/_jsx(FormError,{children:\"Please fill in all sections\"}),/*#__PURE__*/_jsx(FormControls,{children:isLoading?loadButton:submitButton})]})]});var submitConfirmation=/*#__PURE__*/_jsx(CardTitle,{children:\"Message Sent!\"});return/*#__PURE__*/_jsx(_Fragment,{children:scroll&&/*#__PURE__*/_jsx(\"section\",{id:\"contact-form\",children:/*#__PURE__*/_jsx(Card,{children:!formSubmitted?formComponent:submitConfirmation})})});};export default Form;","map":{"version":3,"sources":["D:/Work/cv-react/src/components/Form/Form.tsx"],"names":["Card","CardTitle","useState","FormInput","FormMessage","ContactForm","Button","FormControls","FormError","useContext","ScrollContext","formState","name","email","message","touchState","Form","scrollCtx","scroll","formData","setFormData","isValid","setIsValid","used","setUsed","isLoading","setIsLoading","formSubmitted","setFormSubmitted","nameChangeHandler","event","prevState","target","value","emailChangeHandler","messageChangeHandler","submitHandler","preventDefault","trim","fetch","method","headers","body","JSON","stringify","response","status","console","log","nameBlurHandler","usedState","emailBlurHandler","messageBlurHandler","nameCheck","emailCheck","messageCheck","inputInvalid","submitButton","loadButton","formComponent","submitConfirmation"],"mappings":"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","sourcesContent":["import { Card, CardTitle } from \"../UI/Card\";\r\nimport { useState } from \"react\";\r\nimport FormInput from \"./FormInput\";\r\nimport FormMessage from \"./FormMessage\";\r\nimport { ContactForm, Button, FormControls, FormError } from \"./FormStyles\";\r\nimport { useContext } from \"react\";\r\nimport ScrollContext from \"../../store/context\";\r\n\r\nconst formState: { name: string; email: string; message: string } = {\r\n  name: \"\",\r\n  email: \"\",\r\n  message: \"\",\r\n};\r\n\r\nconst touchState: { name: boolean; email: boolean; message: boolean } = {\r\n  name: false,\r\n  email: false,\r\n  message: false,\r\n};\r\n\r\nconst Form = () => {\r\n  const scrollCtx = useContext(ScrollContext);\r\n  const scroll = scrollCtx.scroll;\r\n  const [formData, setFormData] = useState(formState);\r\n  const [isValid, setIsValid] = useState(false);\r\n  const [used, setUsed] = useState(touchState);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [formSubmitted, setFormSubmitted] = useState(false);\r\n\r\n  const nameChangeHandler = (\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    setFormData((prevState) => ({ ...prevState, name: event.target.value }));\r\n  };\r\n\r\n  const emailChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData((prevState) => ({ ...prevState, email: event.target.value }));\r\n  };\r\n\r\n  const messageChangeHandler = (\r\n    event: React.ChangeEvent<HTMLTextAreaElement>\r\n  ) => {\r\n    setFormData((prevState) => ({ ...prevState, message: event.target.value }));\r\n  };\r\n\r\n  const submitHandler = async (event: any) => {\r\n    event.preventDefault();\r\n    setIsLoading(true);\r\n    setUsed((prevState) => ({\r\n      ...prevState,\r\n      name: true,\r\n      email: true,\r\n      message: true,\r\n    }));\r\n\r\n    if (\r\n      formData.name.trim() === \"\" ||\r\n      formData.email.trim() === \"\" ||\r\n      formData.message.trim() === \"\"\r\n    ) {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n\r\n    setIsValid(true);\r\n\r\n    const response = await fetch(\"http://localhost:3001/send\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-type\": \"application/json\" },\r\n      body: JSON.stringify(formData),\r\n    })\r\n\r\n    if(response.status === 200) {\r\n      console.log(\"Message Sent\");\r\n      setFormSubmitted(true);\r\n    } else {\r\n      console.log(\"Message failed to send\")\r\n    }\r\n  };\r\n\r\n  const nameBlurHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setUsed((usedState) => ({ ...usedState, name: true }));\r\n\r\n    if (formData.name.trim() === \"\") {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n    setIsValid(true);\r\n  };\r\n\r\n  const emailBlurHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setUsed((prevState) => ({ ...prevState, email: true }));\r\n\r\n    if (formData.email.trim() === \"\") {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n    setIsValid(true);\r\n  };\r\n\r\n  const messageBlurHandler = (\r\n    event: React.ChangeEvent<HTMLTextAreaElement>\r\n  ) => {\r\n    setUsed((prevState) => ({ ...prevState, message: true }));\r\n\r\n    if (formData.message.trim() === \"\") {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n    setIsValid(true);\r\n  };\r\n\r\n  const nameCheck = !isValid && used.name;\r\n  const emailCheck = !isValid && used.email;\r\n  const messageCheck = !isValid && used.message;\r\n\r\n  const inputInvalid = used.name && used.email && used.message && !isValid;\r\n\r\n  const submitButton = <Button type=\"submit\">Send</Button>;\r\n\r\n  const loadButton = (\r\n    <Button disabled type=\"submit\">\r\n      Sending...\r\n    </Button>\r\n  );\r\n\r\n  const formComponent = (\r\n    <>\r\n      <CardTitle>Contact Form</CardTitle>\r\n      <ContactForm onSubmit={submitHandler}>\r\n        <FormInput\r\n          id=\"name\"\r\n          errorClass={nameCheck}\r\n          labelName=\"Name\"\r\n          min={1}\r\n          inputValue={formData.name}\r\n          inputChange={nameChangeHandler}\r\n          onBlur={nameBlurHandler}\r\n        />\r\n        <FormInput\r\n          id=\"email\"\r\n          errorClass={emailCheck}\r\n          labelName=\"Email\"\r\n          min={1}\r\n          inputValue={formData.email}\r\n          inputChange={emailChangeHandler}\r\n          onBlur={emailBlurHandler}\r\n        />\r\n        <FormMessage\r\n          id=\"message\"\r\n          errorClass={messageCheck}\r\n          labelName=\"Message\"\r\n          rows={5}\r\n          messageValue={formData.message}\r\n          messageChange={messageChangeHandler}\r\n          onBlur={messageBlurHandler}\r\n        />\r\n        {inputInvalid && <FormError>Please fill in all sections</FormError>}\r\n        <FormControls>{isLoading ? loadButton : submitButton}</FormControls>\r\n      </ContactForm>\r\n    </>\r\n  );\r\n\r\n  const submitConfirmation = <CardTitle>Message Sent!</CardTitle>;\r\n\r\n  return (\r\n    <>\r\n      {scroll && <section id=\"contact-form\">\r\n        <Card>{!formSubmitted ? formComponent : submitConfirmation}</Card>\r\n      </section>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"]},"metadata":{},"sourceType":"module"}